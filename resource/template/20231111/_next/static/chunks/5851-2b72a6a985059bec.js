"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5851],{67058:function(e,n,t){t.r(n),t.d(n,{__N_SSP:function(){return nW},default:function(){return nK}});var i,r,o,a,l,s,c,u=t(35250),d=t(21950),f=t(21722),m=t(39324),p=t(71209),h=t(10064),g=t(64502),v=t(38104),x=t(39669),_=t(39368),b=t(73780),y=t(70496),j=t(94705),w=t(7184),N=t(30769);function k(e){var n,t=e.gizmoId,i=(0,d.b9)(t,!0).data,r=(n=(0,f._)(function(){return(0,v.Jh)(this,function(e){switch(e.label){case 0:return[4,N.U.postGizmoCancelAppeal(t)];case 1:return e.sent(),[2]}})}),function(){return n.apply(this,arguments)});return(0,u.jsx)(w.Z,{isOpen:!0,onClose:function(){},primaryButton:(0,u.jsx)(j.ZP.Button,{title:"Cancel appeal",color:"primary",onClick:r}),type:"warning",children:(0,u.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,u.jsx)("h2",{className:"text-lg font-semibold",children:"Reviewing your appeal"}),(0,u.jsxs)("p",{children:["During the review you can continue using “",null==i?void 0:i.name,"” as your private GPT, but won’t be able to update it or share it with others."]})]})})}var T=t(4337),P=t(21389);function C(){var e=(0,T._)(["bold underline"]);return C=function(){return e},e}var I=P.Z.a(C());function z(e){var n=e.isFlaggedBrandName,t=e.onClose;return(0,u.jsx)(w.Z,{title:"Your changes couldn’t be published",isOpen:!0,onClose:t,closeButton:(0,u.jsx)(j.ZP.CloseButton,{onClose:t}),primaryButton:(0,u.jsx)(j.ZP.Button,{title:"Continue",color:"primary",onClick:t}),type:"warning",children:(0,u.jsx)("div",{className:"flex flex-col gap-2 text-sm",children:n?(0,u.jsxs)("p",{children:["Your GPT’s name is restricted for public sharing. If this is your organization’s name, please verify your website via the"," ",(0,u.jsx)(I,{href:"/#settings/BuilderProfile",children:"Builder profile in Settings"}),"."]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:"Your GPT isn’t ready for public sharing yet. Usually, it’s a quick fix."}),(0,u.jsx)("p",{children:"Here’s what you can do"}),(0,u.jsxs)("ul",{className:"list-disc pl-5",children:[(0,u.jsxs)("li",{children:[(0,u.jsx)("b",{children:"Review your info:"})," Check that your description, name, and profile picture meet our"," ",(0,u.jsx)(I,{target:"_blank",href:"https://openai.com/brand",rel:"noreferrer",children:"brand"})," ","and"," ",(0,u.jsx)(I,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:"usage"})," ","guidelines."]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("b",{children:"Share again:"})," Once updated, go ahead and share your GPT."]})]}),(0,u.jsxs)("p",{children:["Concerns? Your feedback is welcome"," ",(0,u.jsx)(I,{target:"_blank",href:"https://forms.gle/qXd1PjZmuJYhvxow5",rel:"noreferrer",children:"here"})," ","and helps us improve."]}),(0,u.jsx)("p",{children:"Feel free to use your GPT privately for now by publishing to “only me”."})]})})})}var S=t(80275),G=t(42798),M=t(72290),A=t(62682),E=t(51505),U=t(17944),L=t(8679),Z=t(18481),R=t(70079),D=t(35427),V=t(68951),q=t(19841),O=t(61888),B=t(10721),J=t.n(B),F=t(70216),W=t(5053),K=t(61098),H=t(48133),X=t(35265),Y=t(89319),Q={Root:function(e){var n=e.className,t=e.children,i=(0,F._)(e,["className","children"]);return(0,u.jsx)(D.fC,(0,p._)((0,m._)({className:n},i),{children:t}))},Item:function(e){var n=e.value,t=e.className,i=e.label,r=(0,F._)(e,["value","className","label"]);return(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(D.ck,(0,m._)({id:n,value:n,className:(0,q.default)("h-4 w-4 flex-shrink-0 gap-2 rounded-full border border-token-text-tertiary bg-transparent shadow-sm outline-none hover:bg-token-surface-tertiary",t)},r)),(0,u.jsx)("label",{htmlFor:n,className:"w-full cursor-pointer",children:i})]})},Indicator:function(e){var n=e.className,t=(0,F._)(e,["className"]);return(0,u.jsx)(D.z$,(0,m._)({className:(0,q.default)("relative flex h-full w-full items-center justify-center after:block after:h-2 after:w-2 after:rounded-[50%] after:bg-token-text-primary after:content-['']",n)},t))}};function $(e){var n=e.content,t=e.button;return(0,u.jsxs)("div",{className:"flex rounded-lg border border-token-border-medium text-sm",children:[(0,u.jsx)("div",{className:"grow px-3 py-2",children:n}),(0,u.jsx)("div",{className:"w-px bg-token-border-medium"}),t]})}var ee=t(70671),en=t(94968);function et(e){var n=e.onSelectExample,t=(0,ee.Z)();return(0,u.jsxs)("select",{onChange:function(e){n(JSON.stringify(ei[parseInt(e.target.value)],null,2))},className:"rounded border border-token-border-medium bg-transparent px-2 py-1 text-sm",children:[(0,u.jsx)("option",{children:t.formatMessage(er.examples)}),ei.map(function(e,n){return(0,u.jsx)("option",{value:n,children:e.info.title},n)})]})}var ei=[{openapi:"3.1.0",info:{title:"Get weather data",description:"Retrieves current weather data for a location.",version:"v1.0.0"},servers:[{url:"https://api.example-weather-app.com"}],paths:{"/location":{get:{description:"Get temperature for a specific location",operationId:"GetCurrentWeather",parameters:[{name:"location",in:"query",description:"The city and state to retrieve the weather for",required:!0,schema:{type:"string"}}],deprecated:!1}}},components:{schemas:{}}},{openapi:"3.1.0",info:{title:"OpenAI Profile",description:"Gets data about the current user's OpenAI profile",version:"v1.0.0"},servers:[{url:"https://api.openai.com"}],paths:{"/v1/me":{get:{description:"Gets the user's profile",operationId:"GetProfile",parameters:[],deprecated:!1,security:[{apiKey:[]}]}},"/v1/chat/completions":{post:{description:"Creates a model response for the given chat conversation.",operationId:"RequestCompletion",parameters:[],requestBody:{content:{"application/json":{schema:{$ref:"#/components/schemas/RequestCompletionRequestSchema"}}},required:!0},deprecated:!1,security:[{apiKey:[]}]}}},components:{schemas:{RequestCompletionRequestSchema:{properties:{model:{type:"string",title:"model",description:"ID of the model to use"},messages:{type:"array",items:{type:"object",properties:{role:{type:"string",enum:["system","user","assistant"]},content:{type:"string"}}}}},type:"object",required:["model","messages"],title:"RequestCompletionRequestSchema"}},securitySchemes:{apiKey:{type:"apiKey"}}}},{openapi:"3.1.0",info:{title:"Untitled",description:"Your OpenAPI specification",version:"v1.0.0"},servers:[{url:""}],paths:{},components:{schemas:{}}}],er=(0,en.vU)({examples:{id:"gizmo.actions.examples",defaultMessage:"Examples",description:"Label of examples in GPT actions editor"}}),eo=t(96114),ea=t(15635),el=t(47428),es=t(76483),ec=t(1454),eu=t(66161),ed=t(68260),ef=t(12065),em=t(98135),ep=t(91202),eh=t(19797),eg=t(17130),ev=t(418),ex=t(10943);function e_(){return(0,u.jsx)("div",{className:"relative flex h-full w-full items-center justify-center rounded-full border-2 border-dashed border-black border-token-border-medium",children:(0,u.jsx)(G.Z,{className:"h-1/4 w-1/4"})})}function eb(e){var n,t=e.gizmoTemplate,i=e.onFileChange,r=e.generateProfilePic,o=e.isGeneratingProfilePic,a=e.setIsGeneratingProfilePic,l=(0,ee.Z)(),s=(0,h._)((0,R.useState)(void 0),2),c=s[0],d=s[1],g=(0,R.useRef)(i);function x(){return(x=(0,f._)(function(e){var n,t;return(0,v.Jh)(this,function(i){switch(i.label){case 0:if(!(e.length>0))return[3,2];return a(!1),[4,(0,eg.WI)(e[0],512)];case 1:n=i.sent(),d({tempId:t=(0,eh.W7)(n),file:n,status:ep.X.Uploading,progress:1,fileId:null,cdnUrl:null}),g.current("uploading"),(0,eh.lU)(t,n,l,W.Ei.ProfilePicture,{onFileCreated:function(e,n,t){d(function(i){return"initial"!==i&&(null==i?void 0:i.tempId)===e&&i.status===ep.X.Uploading?(0,p._)((0,m._)({},i),{progress:10,fileId:n,cdnUrl:t}):i})},onFileUploadProgress:function(e,n){d(function(t){return"initial"!==t&&(null==t?void 0:t.tempId)===e&&t.status===ep.X.Uploading?(0,p._)((0,m._)({},t),{progress:n}):t})},onFileUploaded:function(e,n){d(function(t){return"initial"!==t&&(null==t?void 0:t.tempId)===e?(g.current(t),(0,p._)((0,m._)({},t),{status:ep.X.Ready,progress:100,fileSpec:(0,m._)({name:t.file.name,id:t.fileId,size:t.file.size},null!=n?n:{})})):t})},onError:function(e){d(function(n){if("initial"!==n&&(null==n?void 0:n.tempId)===e){g.current(void 0);return}return n})}}),i.label=2;case 2:return[2]}})})).apply(this,arguments)}(0,R.useEffect)(function(){g.current=i});var _=(0,es.uI)((0,m._)({disabled:!1,noClick:!0,onDropAccepted:function(e){return x.apply(this,arguments)},onDropRejected:function(e){return(0,ef.UJ)(e,l,ep.A.ProfilePicture)},multiple:!0,maxSize:ed.xC},(0,eg.Z8)(eg.KL))),b=_.open,y=_.getInputProps,j=!!(null===(n=null==t?void 0:t.config.tags)||void 0===n?void 0:n.includes(S.U9.FirstParty));return(0,u.jsx)("div",{className:"flex w-full items-center justify-center gap-4",children:(0,u.jsxs)(el.fC,{children:[(0,u.jsx)(el.xz,{className:"h-20 w-20",children:o?(0,u.jsx)(e_,{}):null!=c&&"initial"!=c&&c.status!=ep.X.Ready?(0,u.jsxs)("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[(0,u.jsx)(em.l,{file:c.file}),c.status===ep.X.Uploading&&c.progress<90?(0,u.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:(0,u.jsx)(eu.Z,{percentage:c.progress,className:"h-6 w-6"})}):null]}):(null==t?void 0:t.profile_pic_permalink)!=null&&(null==t?void 0:t.profile_pic_permalink)!==""?(0,u.jsx)(ev.Z,{isFirstParty:j,src:t.profile_pic_permalink}):(0,u.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-full border-2 border-dashed border-black border-token-border-medium",children:(0,u.jsx)(ec.OvN,{className:"text-4xl"})})}),(0,u.jsx)(el.Uv,{children:(0,u.jsxs)(el.VY,{className:"flex min-w-[100px] max-w-xs flex-col rounded-xl border border-gray-400 bg-token-surface-primary shadow-lg dark:border-gray-700",sideOffset:7,children:[(0,u.jsxs)(ex.UA,{onClick:b,children:[(0,u.jsx)("input",(0,m._)({},y())),"Upload Photo"]}),(0,u.jsx)(ex.UA,{onClick:r,children:"Use DALL\xb7E"})]})})]})})}var ey=t(10499),ej=t(86646),ew=t(70737),eN=t(97296),ek=t(7137),eT=t(32004),eP=t(54636),eC=t(42780);function eI(e){var n,t,i=e.gizmo,r=e.requireGizmoId,o=e.currentModelConfig,a=e.updateGizmo,l=function(e){return(0,u.jsx)(em.Z,{onRemoveFileClick:function(){_.current.delete(e.tempId),x(function(e){return e+1})},file:e.file,loadingPercentage:e.status===ep.X.Uploading?e.progress:void 0},e.tempId)},s=function(e){return(0,u.jsx)(em.Z,{file:e.name,fileId:e.file_id,onRemoveFileClick:function(){return a(function(n){var t;return(0,p._)((0,m._)({},n),{config:(0,p._)((0,m._)({},null==n?void 0:n.config),{files:null===(t=null==n?void 0:n.config.files)||void 0===t?void 0:t.filter(function(n){return n.file_id!==e.file_id})})})})},gizmoId:null==i?void 0:i.id},e.file_id)},c=(0,ee.Z)(),d=(0,h._)((0,R.useState)(0),2),x=(d[0],d[1]),_=(0,R.useRef)(new Map),b=(0,eg.Zp)(o,void 0),y=(n=(0,f._)(function(e){var n;return(0,v.Jh)(this,function(t){switch(t.label){case 0:return eP.A.logEvent(eC.M.uploadFile,{eventSource:"mouse",intent:"gizmo"}),[4,r()];case 1:if(n=t.sent(),!(e.length>0))return[3,3];return[4,Promise.all(e.map(function(e){var t=(0,eh.W7)(e);_.current.set(t,{tempId:t,gizmoId:n,file:e,status:ep.X.Uploading,progress:1,fileId:null,cdnUrl:null}),(0,eh.cT)((0,eh.W7)(e),e,c,{kind:W.Ei.Gizmo,gizmoId:n},{onFileUploaded:function(e,n,t){var i,r=_.current.get(e);null!=r&&null!=r.fileId&&(a(function(e){return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{files:(0,g._)(null!==(i=e.config.files)&&void 0!==i?i:[]).concat([{file_id:r.fileId,name:r.file.name,size:r.file.size,type:r.file.type,last_modified:r.file.lastModified,file_size_tokens:null==t?void 0:t.fileTokenSize}])})})}),_.current.delete(e),x(function(e){return e+1}))},onFileCreated:function(t,i,r){_.current.set(t,(0,p._)((0,m._)({tempId:t,gizmoId:n,file:e,status:ep.X.Uploading,progress:1},_.current.get(t)),{fileId:i,cdnUrl:r})),x(function(e){return e+1})},onFileUploadProgress:function(e,n){var t=_.current.get(e);(null==t?void 0:t.status)===ep.X.Uploading&&_.current.set(e,(0,p._)((0,m._)({},t),{progress:n})),x(function(e){return e+1})},onError:function(e){_.current.delete(e)}},{usesRetrievalIndex:null!=o&&(0,eg._0)(o,e.type,e.name)===W.Cd.Retrieval})}))];case 2:t.sent(),t.label=3;case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),j=(0,es.uI)((0,m._)({disabled:!1,noClick:!0,onDropAccepted:y,multiple:!0,maxSize:ed.xC,maxFiles:10},(0,eg.Z8)(b))),w=j.getInputProps,N=j.open,k=null!==(t=null==i?void 0:i.config.files)&&void 0!==t?t:[],T=Array.from(_.current.values()).filter(function(e){return k.every(function(n){return n.file_id!==e.fileId})}),P=(0,h._)((0,O.partition)(T,function(e){return null!=o&&(0,eg._0)(o,e.file.type,e.file.name)===W.Cd.CodeInterpreter}),2),C=P[0],I=P[1],z=(0,h._)((0,O.partition)(k,function(e){return null!=o&&null!=e.type&&(0,eg._0)(o,e.type,e.name)===W.Cd.CodeInterpreter}),2),S=z[0],G=z[1],M=(0,R.useRef)(S.length);return(0,R.useEffect)(function(){if(S.length>M.current){var e;a(function(n){var t;return(null===(t=n.config.enabled_tools)||void 0===t?void 0:t.some(function(e){return e.tool_id===W.qK.Python}))?n:(0,p._)((0,m._)({},n),{config:(0,p._)((0,m._)({},n.config),{enabled_tools:(0,g._)(null!==(e=n.config.enabled_tools)&&void 0!==e?e:[]).concat([{tool_id:W.qK.Python}])})})})}M.current=S.length},[S.length]),(0,u.jsxs)("div",{className:"flex flex-col gap-4",children:[(T.length>0||k.length>0)&&(0,u.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:(0,u.jsx)(eT.Z,(0,m._)({},ez.knowledgeWarning))}),I.length>0||G.length>0?(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[I.map(l),G.map(s)]}):null,C.length>0||S.length>0?(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"mb-2 text-xs text-gray-600 dark:text-gray-300",children:"The following files are only available for Code Interpreter:"}),(0,u.jsxs)("div",{className:"flex flex-wrap gap-2",children:[C.map(l),S.map(s)]})]}):null,(0,u.jsx)("div",{children:(0,u.jsxs)(ex.cY,{onClick:N,children:[(0,u.jsx)("input",(0,m._)({},w())),"Upload files"]})})]})}var ez=(0,en.vU)({knowledgeWarning:{id:"gizmo.knowledgeWarning",defaultMessage:"Conversations with your GPT may include file contents. Files can be downloaded when code interpeter is enabled.",description:"Explanation text for what happens when files are uploaded"}});function eS(e){var n=e.placeholder,t=e.text,i=e.onChange,r=e.onClose;return(0,u.jsx)(w.Z,{className:"!max-h-[100vh] !max-w-[80vw]",type:"success",isOpen:!0,onClose:r,primaryButton:(0,u.jsx)(ex.cY,{onClick:r,children:"Close"}),children:(0,u.jsx)("textarea",{className:"h-[70vh] w-full resize-none rounded-lg dark:border-gray-700 dark:bg-gray-800",value:t,onChange:function(e){i(e.target.value)},placeholder:n})})}function eG(e){var n=e.label,t=e.tool,i=e.enabledTools,r=e.onEnabledToolsChange,o=e.disabled,a=e.disabledTooltip,l=function(e){return i.some(function(n){return n.tool_id===e})},s=(0,u.jsx)(ex.f8,{labelClassName:"w-full cursor-pointer",id:t,label:n,checked:!o&&l(t),disabled:o,onChange:function(){l(t)?r(i.filter(function(e){return e.tool_id!==t})):r((0,g._)(i).concat([{tool_id:t}]))}});return null!=a?(0,u.jsx)("div",{className:"opacity-70",children:(0,u.jsx)(ea.u,{side:"top",label:a,children:s})}):s}function eM(e){var n=e.enabledTools,t=e.onEnabledToolsChange,i=(0,b.C)(A.L0.BrowseAvailable);return(0,u.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,u.jsx)(eG,{label:"Web Browsing",tool:W.qK.Browser,enabledTools:n,onEnabledToolsChange:t,disabled:!i,disabledTooltip:i?void 0:(0,u.jsx)(eT.Z,(0,m._)({},eA.disabledBrowsingToolTip))}),(0,u.jsx)(eG,{label:"DALL\xb7E Image Generation",tool:W.qK.DallE,enabledTools:n,onEnabledToolsChange:t}),(0,u.jsx)(eG,{label:(0,u.jsxs)("div",{className:"flex items-center",children:["Code Interpreter",(0,u.jsx)(eW,{description:"Code Interpreter lets your GPT run code. When enabled, your GPT can analyze data, work with files you've uploaded, do math and more"})]}),tool:W.qK.Python,enabledTools:n,onEnabledToolsChange:t})]})}var eA=(0,en.vU)({disabledBrowsingToolTip:{defaultMessage:"Web browsing is disabled for your workspace. Contact your admin to enable it.",id:"GizmoEditorModelPicker.disabledBrowsingToolTip",description:"Web browsing disable tooltip"}}),eE=t(42786);function eU(e){switch(e){case a.Loading:return"Loading";case a.UploadingProfilePic:return"Uploading profile picture";case a.GeneratingProfilePic:return"Generating profile picture";case a.TemplateNameTooLong:return"GPT name too long";case a.TemplateDescriptionTooLong:return"GPT description too long";case a.TemplateWelcomeMessageTooLong:return"GPT welcome message too long";case a.TemplateInstructionsTooLong:return"GPT instructions too long";case a.NameEmpty:return"GPT name cannot be empty";case a.MissingPublicActionPrivacyPolicyURL:return"Public actions require valid privacy policy URLs";default:return(0,eE.Z)(e),""}}function eL(e,n){var t=e.name.length>_.h5,i=(null!==(f=null===(c=e.description)||void 0===c?void 0:c.length)&&void 0!==f?f:0)>_.Ip,r=(null!==(m=null===(u=e.config.assistant_welcome_message)||void 0===u?void 0:u.length)&&void 0!==m?m:0)>_.e6,o=(null!==(p=null===(d=e.config.context_message)||void 0===d?void 0:d.length)&&void 0!==p?p:0)>_.k,l=[];if((null==e?void 0:e.name)===""&&l.push(a.NameEmpty),t&&l.push(a.TemplateNameTooLong),i&&l.push(a.TemplateDescriptionTooLong),o&&l.push(a.TemplateInstructionsTooLong),r&&l.push(a.TemplateWelcomeMessageTooLong),null!=n&&[S.Zz.Link,S.Zz.Marketplace].includes(n)){var s=null===(h=e.config.enabled_tools)||void 0===h?void 0:h.find(function(e){return e.tool_id===W.qK.JitPlugin});if(null!=s){var c,u,d,f,m,p,h,g,v=null===(g=s.data)||void 0===g?void 0:g.privacy_policy_url;(null==v||!function(e){try{return new URL(e),!0}catch(e){return!1}}(v))&&l.push(a.MissingPublicActionPrivacyPolicyURL)}}return l}function eZ(){var e=(0,T._)(["w-full resize-none overflow-y-auto rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 border focus:ring-blue-400 border-token-border-medium dark:bg-gray-700 h-9 dark:bg-gray-800"]);return eZ=function(){return e},e}function eR(){var e=(0,T._)(["text-sm text-red-500"]);return eR=function(){return e},e}function eD(){var e=(0,T._)(["mb-6"]);return eD=function(){return e},e}function eV(){var e=(0,T._)(["w-full text-sm overflow-y-auto rounded-lg border bg-transparent px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium dark:bg-gray-800 bg-white h-32"]);return eV=function(){return e},e}(i=a||(a={}))[i.Loading=0]="Loading",i[i.UploadingProfilePic=1]="UploadingProfilePic",i[i.GeneratingProfilePic=2]="GeneratingProfilePic",i[i.TemplateNameTooLong=3]="TemplateNameTooLong",i[i.TemplateDescriptionTooLong=4]="TemplateDescriptionTooLong",i[i.TemplateWelcomeMessageTooLong=5]="TemplateWelcomeMessageTooLong",i[i.TemplateInstructionsTooLong=6]="TemplateInstructionsTooLong",i[i.NameEmpty=7]="NameEmpty",i[i.MissingPublicActionPrivacyPolicyURL=8]="MissingPublicActionPrivacyPolicyURL";var eq=P.Z.input(eZ()),eO=P.Z.div(eR()),eB=P.Z.div(eD()),eJ=P.Z.textarea(eV());function eF(){return(0,u.jsx)("div",{className:"ml-2 flex h-3.5 w-3.5 cursor-default items-center justify-center rounded-full border border-token-border-medium text-[0.5rem] font-medium leading-none text-gray-500 ",children:"?"})}function eW(e){var n=e.description;return(0,u.jsx)(ea.u,{label:n,delayDuration:0,children:(0,u.jsx)(eF,{})})}function eK(e){var n=e.label,t=e.description,i=e.collapsed,r=e.onClick,o=(0,u.jsx)("label",{className:"block font-medium text-token-text-primary",children:n});return(0,u.jsxs)("div",{className:"mb-1.5 flex items-center",onClick:r,children:[void 0!==i&&(i?(0,u.jsx)(ek.H_v,{}):(0,u.jsx)(ek.iUH,{})),t?(0,u.jsx)(ea.u,{label:t,side:"top",delayDuration:0,children:o}):(0,u.jsx)(u.Fragment,{children:o})]})}function eH(e){var n=e.children,t=e.collapsed,i=e.initial;return(0,u.jsx)(ew.M,{initial:i,children:!t&&(0,u.jsx)(eN.E.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:n})})}function eX(e){var n,t=e.actionTool,i=e.onShowActionsEditor,r=null===(n=t.data)||void 0===n?void 0:n.domain;return(0,u.jsx)($,{content:null!=r?r:(0,u.jsx)("span",{className:"text-red-500",children:"Invalid action"}),button:(0,u.jsx)("button",{onClick:function(){i()},className:"px-2",children:(0,u.jsx)(X.RR,{className:"icon-sm"})})})}function eY(e){var n,t,i,r,o=e.gizmo,a=e.onShowActionsEditor,l=null===(n=null==o?void 0:o.config.enabled_tools)||void 0===n?void 0:n.find(function(e){return e.tool_id===W.qK.JitPlugin});return(0,u.jsxs)("div",{className:"space-y-4",children:[null!=l?(0,u.jsx)(eX,{actionTool:l,onShowActionsEditor:a}):(0,u.jsx)(ex.cY,{onClick:function(){a()},children:"Add actions"}),o&&(null==l?void 0:null===(t=l.data)||void 0===t?void 0:null===(i=t.auth)||void 0===i?void 0:i.type)==="oauth"&&(0,u.jsx)(eo.Z,{label:"Callback URL",value:"".concat("https://chat.openai.com","/aip/").concat(null===(r=l.data)||void 0===r?void 0:r.action_id,"/oauth/callback"),onCopied:function(){M.m.success("Copied to clipboard",{duration:3})}})]})}function eQ(e){var n,t,i,r,o,l,s,c,d,x,y,j,w=e.gizmoTemplate,N=e.updateGizmoTemplate,k=e.generateProfilePic,T=e.setIsUploadingProfilePic,P=e.isGeneratingProfilePic,C=e.setIsGeneratingProfilePic,I=e.requireGizmoId,z=e.onShowActionsEditor,S=(0,ey.B9)(),G=null!==(o=null==w?void 0:w.config.model_slug)&&void 0!==o?o:ey.mx,M=null!==(l=null==w?void 0:w.config.enabled_tools)&&void 0!==l?l:[],E=G?S.get(G):void 0,L=(0,h._)((0,R.useState)(!1),2),Z=L[0],D=L[1],V=(0,h._)((0,R.useState)(!1),2),B=V[0],J=V[1],F=(0,h._)((0,R.useState)(!1),2),K=F[0],H=F[1],Y=(0,h._)((0,R.useState)(!0),2),Q=Y[0],$=Y[1],en=null!==(s=null==w?void 0:w.config.prompt_starters)&&void 0!==s?s:[],et=(0,g._)(en).concat((0,g._)(en.length<12?[""]:[])),ei=eL(w),er=(0,U.ec)(U.F_.isBusinessWorkspace),eo=(0,b.C)(A.L0.WorkspaceGPTCustomActions),ea=(0,ee.Z)();return K?(0,u.jsx)(e7,{gizmo:w,updateGizmo:N,onClose:function(){H(!1)}}):(0,u.jsxs)("div",{className:"flex h-full grow flex-col overflow-y-auto px-2 pt-6 text-sm",children:[(0,u.jsxs)("div",{className:"grow",children:[(0,u.jsxs)(eB,{children:[(0,u.jsx)(eb,{gizmoTemplate:w,generateProfilePic:k,isGeneratingProfilePic:P,setIsGeneratingProfilePic:C,onFileChange:(n=(0,f._)(function(e){var n;return(0,v.Jh)(this,function(t){switch(t.label){case 0:if(!(null!=e&&"uploading"!==e&&null!=e.fileId))return[3,2];return[4,ej.ZP.getFileDownloadLink(e.fileId)];case 1:return(n=t.sent()).status===W.KF.Success&&N({profile_pic_id:null!=e.fileId?e.fileId:void 0,profile_pic_permalink:n.download_url}),[3,3];case 2:N({profile_pic_id:void 0,profile_pic_permalink:void 0}),t.label=3;case 3:return T("uploading"===e),[2]}})}),function(e){return n.apply(this,arguments)})}),(0,u.jsx)(eK,{label:"Name",description:"The name of your GPT"}),(0,u.jsx)(eq,{type:"text",placeholder:"Name your GPT",value:null!==(c=null==w?void 0:w.name)&&void 0!==c?c:"",onChange:function(e){N({name:e.target.value})},onBlurCapture:function(){return N(function(e){return(0,p._)((0,m._)({},e),{name:e.name.trim()})})}}),ei.includes(a.TemplateNameTooLong)?(0,u.jsx)(eO,{className:"mt-1",children:(0,u.jsx)(eT.Z,(0,p._)((0,m._)({},e$.nameTooLong),{values:{length:_.h5}}))}):null]}),(0,u.jsxs)(eB,{className:"mt-4",children:[(0,u.jsx)(eK,{label:"Description",description:"Short description of what this GPT does"}),(0,u.jsx)(eq,{type:"text",placeholder:"Add a short description about what this GPT does",value:null!==(d=null==w?void 0:w.description)&&void 0!==d?d:"",onChange:function(e){return N({description:e.target.value})},onBlurCapture:function(){return N(function(e){var n;return(0,p._)((0,m._)({},e),{description:null!==(x=null===(n=e.description)||void 0===n?void 0:n.trim())&&void 0!==x?x:""})})}}),ei.includes(a.TemplateDescriptionTooLong)?(0,u.jsx)(eO,{className:"mt-1",children:(0,u.jsx)(eT.Z,(0,p._)((0,m._)({},e$.descriptionTooLong),{values:{length:_.Ip}}))}):null]}),(0,u.jsxs)(eB,{children:[(0,u.jsx)(eK,{label:"Instructions",description:"What does this GPT do? How does it behave? What should it avoid doing?"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(eJ,{className:"resize-none",rows:8,value:null==w?void 0:w.config.context_message,onChange:function(e){return N({config:{context_message:e.target.value}})},onBlurCapture:function(){return N(function(e){return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{context_message:e.config.context_message.trim()})})})},placeholder:"What does this GPT do? How does it behave? What should it avoid doing?"}),(0,u.jsx)("button",{className:"absolute bottom-3 right-2 text-token-text-tertiary",onClick:function(){return D(!0)},children:(0,u.jsx)(X.j5,{className:"icon-sm"})})]}),ei.includes(a.TemplateInstructionsTooLong)?(0,u.jsx)(eO,{className:"mt-1",children:(0,u.jsx)(eT.Z,(0,p._)((0,m._)({},e$.instructionsTooLong),{values:{length:_.k}}))}):null]}),(0,u.jsxs)(eB,{className:"hidden",children:[(0,u.jsx)(eK,{label:"Welcome Message",description:"How this GPT starts conversations."}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(eJ,{className:(0,q.default)("h-16 resize-none"),value:null==w?void 0:w.config.assistant_welcome_message,onChange:function(e){return N({config:{assistant_welcome_message:e.target.value}})},onBlurCapture:function(){return N({config:{assistant_welcome_message:null==w?void 0:w.config.assistant_welcome_message}})},placeholder:"How this GPT starts conversations."}),(0,u.jsx)("button",{className:"absolute bottom-3 right-2 text-token-text-tertiary",onClick:function(){return J(!0)},children:(0,u.jsx)(X.j5,{className:"icon-sm"})})]}),ei.includes(a.TemplateWelcomeMessageTooLong)?(0,u.jsx)(eO,{className:"mt-1",children:(0,u.jsx)(eT.Z,(0,p._)((0,m._)({},e$.welcomeMessageTooLong),{values:{length:_.e6}}))}):null]}),(0,u.jsxs)(eB,{children:[(0,u.jsx)(eK,{label:"Conversation starters",description:"Examples for the user to start the conversation"}),(0,u.jsx)("div",{className:"flex flex-col gap-1",children:et.map(function(e,n){return(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(eq,{className:"rounded-r-none",value:e,type:"text",onChange:function(e){var t,i=e.target.value;N(function(e){return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{prompt_starters:(0,O.compact)(n>=(null!==(t=en.length)&&void 0!==t?t:0)?(0,g._)(null!=en?en:[]).concat([i]):en.map(function(e,t){if(t===n){if(""===i)return;return i}return e}))})})})}}),(0,u.jsx)("button",{className:"flex h-9 w-9 items-center justify-center rounded-lg rounded-l-none border border-l-0 border-token-border-medium",onClick:function(){return N(function(e){return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{prompt_starters:en.filter(function(e,t){return t!==n})})})})},children:(0,u.jsx)(X.v7,{className:"icon-sm"})})]},n)})})]}),(0,u.jsxs)(eB,{children:[(0,u.jsx)(eK,{label:"Knowledge",description:ea.formatMessage(e$.knowledgeExplanation)}),(0,u.jsx)(eI,{gizmo:w,requireGizmoId:I,currentModelConfig:E,updateGizmo:N})]}),(0,u.jsxs)(eB,{children:[(0,u.jsx)(eK,{label:"Capabilities",description:"Functionality this GPT can use"}),(0,u.jsx)(eM,{enabledTools:M,onEnabledToolsChange:function(e){return N({config:{enabled_tools:e}})}})]}),eo&&(0,u.jsxs)(eB,{children:[(0,u.jsx)(eK,{label:"Actions",description:"APIs this GPT can use"}),(0,u.jsx)(eY,{gizmo:w,onShowActionsEditor:z})]}),!er&&((null!==(r=null===(t=w.config.files)||void 0===t?void 0:t.length)&&void 0!==r?r:0)>0||(null===(i=null==w?void 0:w.config.enabled_tools)||void 0===i?void 0:i.some(function(e){return e.tool_id===W.qK.JitPlugin})))&&(0,u.jsxs)(eB,{children:[(0,u.jsx)(eK,{label:"Additional Settings",collapsed:!!Q,onClick:function(){$(function(e){return!e})}}),(0,u.jsx)(eH,{collapsed:Q,initial:!1,children:(0,u.jsx)(ex.f8,{className:"mx-3 my-1",labelClassName:"w-full cursor-pointer",label:"Use conversation data in your GPT to improve our models",id:"improve-chatgpt",checked:!w.training_disabled,onChange:function(){N({training_disabled:!w.training_disabled})}})})]})]}),B&&(0,u.jsx)(eS,{text:null!==(y=w.config.assistant_welcome_message)&&void 0!==y?y:"",onChange:function(e){N({config:{assistant_welcome_message:e}})},onClose:function(){return J(!1)},placeholder:"How this GPT starts conversations."}),Z&&(0,u.jsx)(eS,{text:null!==(j=w.config.context_message)&&void 0!==j?j:"",onChange:function(e){N({config:{context_message:e}})},onClose:function(){return D(!1)},placeholder:"What does this GPT do? How does it behave? What should it avoid doing?"})]})}var e$=(0,en.vU)({nameTooLong:{id:"gizmo.nameTooLong",defaultMessage:"GPT names cannot be longer than {length} characters.",description:"Error message when name is too long"},knowledgeExplanation:{id:"gizmo.knowledgeExplanation",defaultMessage:"Additional files for this GPT to reference.",description:"Explainer text around what happens when your files upload."},descriptionTooLong:{id:"gizmo.descriptionTooLong",defaultMessage:"GPT descriptions cannot be longer than {length} characters.",description:"Error message when description is too long"},instructionsTooLong:{id:"gizmo.instructionsTooLong",defaultMessage:"GPT instructions cannot be longer than {length} characters.",description:"Error message when instructions are too long"},welcomeMessageTooLong:{id:"gizmo.welcomeMessageTooLong",defaultMessage:"GPT welcome messages cannot be longer than {length} characters.",description:"Error message when welcome message is too long"}});function e0(e){var n=e.children;return(0,u.jsx)("label",{className:"mb-1 block text-sm font-medium",children:n})}function e1(e){var n,t,i,r,o,a,l,s,c,d,f,p,g,v,x,_,b,y,j,N,k,T=e.jitPluginTool,P=e.onUpdateTool,C=e.onClose,I=function(e){M(function(n){return(0,m._)({},n,e)})},z=function(){P(G.authTypeValue===K.Jv.None?{type:K.Jv.None}:G.authTypeValue===K.Jv.OAuth?{type:K.Jv.OAuth,client_url:G.oauthAuthUrlValue,authorization_url:G.oauthTokenUrlValue,authorization_content_type:"application/x-www-form-urlencoded",scope:G.oauthScopeValue,token_exchange_method:G.tokenExchangeMethodValue,oauth_client_id:G.oauthClientIdValue,oauth_client_secret:G.oauthClientSecretValue}:{type:K.Jv.ServiceHTTP,authorization_type:G.httpAuthTypeValue,custom_auth_header:G.customHeaderValue,api_key:G.apiKeyValue}),C()},S=(0,h._)((0,R.useState)({apiKeyValue:"",oauthClientIdValue:"",oauthClientSecretValue:"",oauthAuthUrlValue:null!==(x=null==T?void 0:null===(n=T.data)||void 0===n?void 0:null===(t=n.auth)||void 0===t?void 0:t.client_url)&&void 0!==x?x:"",oauthTokenUrlValue:null!==(_=null==T?void 0:null===(i=T.data)||void 0===i?void 0:null===(r=i.auth)||void 0===r?void 0:r.authorization_url)&&void 0!==_?_:"",oauthScopeValue:null!==(b=null==T?void 0:null===(o=T.data)||void 0===o?void 0:null===(a=o.auth)||void 0===a?void 0:a.scope)&&void 0!==b?b:"",authTypeValue:null!==(y=null==T?void 0:null===(l=T.data)||void 0===l?void 0:null===(s=l.auth)||void 0===s?void 0:s.type)&&void 0!==y?y:K.Jv.None,httpAuthTypeValue:null!==(j=null==T?void 0:null===(c=T.data)||void 0===c?void 0:null===(d=c.auth)||void 0===d?void 0:d.authorization_type)&&void 0!==j?j:"basic",customHeaderValue:null!==(N=null==T?void 0:null===(f=T.data)||void 0===f?void 0:null===(p=f.auth)||void 0===p?void 0:p.custom_auth_header)&&void 0!==N?N:"",tokenExchangeMethodValue:null!==(k=null==T?void 0:null===(g=T.data)||void 0===g?void 0:null===(v=g.auth)||void 0===v?void 0:v.token_exchange_method)&&void 0!==k?k:"default_post"}),2),G=S[0],M=S[1];return(0,u.jsxs)(w.Z,{type:"success",isOpen:!0,title:"Authentication",primaryButton:(0,u.jsx)(H.z,{color:"dark",onClick:function(){z()},children:"Save"}),secondaryButton:(0,u.jsx)(H.z,{color:"neutral",onClick:C,children:"Cancel"}),onClose:C,children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)(e0,{children:"Authentication Type"}),(0,u.jsxs)(Q.Root,{onValueChange:function(e){I({authTypeValue:e})},value:G.authTypeValue,className:"flex gap-4",children:[(0,u.jsx)(ex.Xb,{label:"None",value:K.Jv.None}),(0,u.jsx)(ex.Xb,{label:"API Key",value:K.Jv.ServiceHTTP}),(0,u.jsx)(ex.Xb,{label:"OAuth",value:K.Jv.OAuth})]})]}),"service_http"===G.authTypeValue?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e0,{children:"API Key"}),(0,u.jsx)(eq,{placeholder:"<HIDDEN>",type:"password",value:G.apiKeyValue,onChange:function(e){I({apiKeyValue:e.target.value})},className:"mb-2"}),(0,u.jsx)(e0,{children:"Auth Type"}),(0,u.jsxs)(Q.Root,{className:"mb-2 flex gap-6 overflow-hidden rounded-lg",value:G.httpAuthTypeValue,required:!0,onValueChange:function(e){I({httpAuthTypeValue:e})},children:[(0,u.jsx)(ex.Xb,{value:"basic",label:"Basic"}),(0,u.jsx)(ex.Xb,{value:"bearer",label:"Bearer"}),(0,u.jsx)(ex.Xb,{value:"custom",label:"Custom"})]}),"custom"===G.httpAuthTypeValue&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsx)(e0,{children:"Custom Header Name"}),(0,u.jsx)(eq,{value:G.customHeaderValue,onChange:function(e){I({customHeaderValue:e.target.value})},className:"mb-2",placeholder:"X-Api-Key"})]})]}):"oauth"===G.authTypeValue?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(e0,{children:"Client ID"}),(0,u.jsx)(eq,{placeholder:"<HIDDEN>",type:"password",value:G.oauthClientIdValue,onChange:function(e){I({oauthClientIdValue:e.target.value})},className:"mb-2"}),(0,u.jsx)(e0,{children:"Client Secret"}),(0,u.jsx)(eq,{placeholder:"<HIDDEN>",type:"password",value:G.oauthClientSecretValue,onChange:function(e){I({oauthClientSecretValue:e.target.value})},className:"mb-2"}),(0,u.jsx)(e0,{children:"Authorization URL"}),(0,u.jsx)(eq,{value:G.oauthAuthUrlValue,onChange:function(e){I({oauthAuthUrlValue:e.target.value})},className:"mb-2"}),(0,u.jsx)(e0,{children:"Token URL"}),(0,u.jsx)(eq,{value:G.oauthTokenUrlValue,onChange:function(e){I({oauthTokenUrlValue:e.target.value})},className:"mb-2"}),(0,u.jsx)(e0,{children:"Scope"}),(0,u.jsx)(eq,{value:G.oauthScopeValue,onChange:function(e){I({oauthScopeValue:e.target.value})},className:"mb-2"}),(0,u.jsx)(e0,{children:"Token Exchange Method"}),(0,u.jsxs)(Q.Root,{value:G.tokenExchangeMethodValue,required:!0,onValueChange:function(e){I({tokenExchangeMethodValue:e})},children:[(0,u.jsx)(ex.Xb,{value:"default_post",label:"Default (POST request)"}),(0,u.jsx)(ex.Xb,{value:"basic_auth_header",label:"Basic authorization header"})]})]}):null]})}function e2(e){var n=e.onImport,t=e.onClose,i=(0,h._)((0,R.useState)(""),2),r=i[0],o=i[1],a=(0,h._)((0,R.useState)(!1),2),l=a[0],s=a[1];function c(){return(c=(0,f._)(function(){var e;return(0,v.Jh)(this,function(i){switch(i.label){case 0:try{e=new URL(r)}catch(e){return[2]}if(!(null==e?void 0:e.hostname))return[3,4];s(!0),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,N.U.fetchOpenAPISpec(r)];case 2:return n(i.sent().content),t(),[3,4];case 3:return s(!1),[7];case 4:return[2]}})})).apply(this,arguments)}return(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("input",{name:"url",value:r,onChange:function(e){o(e.target.value)},placeholder:"https://...",className:"h-8 rounded border border-token-border-light px-2 text-sm",autoFocus:!0}),(0,u.jsx)(ex.cY,{color:"dark",loading:l,onClick:function(){return c.apply(this,arguments)},children:"Import"}),(0,u.jsx)(ex.cY,{color:"neutral",onClick:t,children:"Cancel"})]})}function e3(e){var n=e.operations;return null==n||0===n.length?(0,u.jsx)("div",{className:"text-sm text-token-text-tertiary",children:"Operations in your schema will show here."}):(0,u.jsx)("table",{className:"w-full text-sm",children:(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{className:"border-b border-t border-token-border-light text-left text-xs text-token-text-tertiary",children:[(0,u.jsx)("th",{className:"py-1 font-normal",children:"Name"}),(0,u.jsx)("th",{className:"py-1 font-normal",children:"Method"}),(0,u.jsx)("th",{className:"py-1 font-normal",children:"Path"})]}),n.map(function(e){return(0,u.jsxs)("tr",{className:"border-b border-token-border-light",children:[(0,u.jsx)("td",{className:"py-2 font-medium",children:e.operationName}),(0,u.jsx)("td",{className:"py-2 uppercase",children:e.method}),(0,u.jsx)("td",{className:"py-2",children:e.path})]},e.operationName)})]})})}function e4(e){var n=e.validationResponse;return(0,u.jsxs)("div",{children:[n.success&&n.warnings.length>0&&(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)(eK,{label:"Warnings"}),(0,u.jsx)("div",{className:"text-sm text-red-500",children:n.warnings.map(function(e,n){return(0,u.jsx)("div",{children:e},n)})})]}),!n.success&&(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)(eK,{label:"Errors"}),(0,u.jsx)("div",{className:"text-sm text-red-500",children:n.errors.map(function(e,n){return(0,u.jsx)("div",{children:e},n)})})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)(eK,{label:"Available actions"}),(0,u.jsx)(e3,{operations:n.success?n.spec.operations:void 0})]})]})}function e7(e){var n,t,i,r,o,a,l,s,c,d=e.gizmo,x=e.updateGizmo,_=e.onClose,b=function(e){x(function(n){var t,i,r=null===(t=n.config.enabled_tools)||void 0===t?void 0:t.some(function(e){return e.tool_id===W.qK.JitPlugin});return(0,p._)((0,m._)({},n),{config:(0,p._)((0,m._)({},n.config),{enabled_tools:r?n.config.enabled_tools.map(function(n){return n.tool_id===W.qK.JitPlugin?(0,p._)((0,m._)({},n),{data:(0,m._)({},n.data,e)}):n}):(0,g._)(null!==(i=n.config.enabled_tools)&&void 0!==i?i:[]).concat([{tool_id:W.qK.JitPlugin,data:(0,m._)({},e)}])})})})},y=null===(n=null==d?void 0:d.config.enabled_tools)||void 0===n?void 0:n.find(function(e){return e.tool_id===W.qK.JitPlugin}),j=null!==(l=null==y?void 0:null===(t=y.data)||void 0===t?void 0:t.raw_spec)&&void 0!==l?l:"",w=(0,h._)((0,R.useState)(!1),2),k=w[0],T=w[1],P=(0,h._)((0,R.useState)(!1),2),C=P[0],I=P[1],z=(0,h._)((0,R.useState)(),2),S=z[0],G=z[1],M=(0,h._)((0,R.useState)(function(){var e;return(0,O.debounce)((e=(0,f._)(function(e){var n,t;return(0,v.Jh)(this,function(i){switch(i.label){case 0:return[4,N.U.validateOpenAPISpec(e)];case 1:return G(n=i.sent()),t=n.success?n.spec.root_domain:void 0,x(function(e){var n,i,r=null===(n=e.config.enabled_tools)||void 0===n?void 0:n.find(function(e){return e.tool_id===W.qK.JitPlugin});return null!=r&&(null===(i=r.data)||void 0===i?void 0:i.domain)!==t?(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{enabled_tools:e.config.enabled_tools.map(function(e){return e.tool_id===W.qK.JitPlugin?(0,p._)((0,m._)({},e),{data:(0,p._)((0,m._)({},e.data),{domain:t})}):e})})}):e}),[2]}})}),function(n){return e.apply(this,arguments)}),1e3)}),1)[0];(0,R.useEffect)(function(){""===j?(G(void 0),M.cancel()):M(j)},[M,j]);var A=(0,R.useMemo)(function(){try{return JSON.parse(j)}catch(e){return}},[j]);return(0,u.jsxs)("div",{className:"h-full overflow-auto px-4 pb-12",children:[(0,u.jsxs)("div",{className:"relative flex flex-col items-center px-16 py-6 text-center",children:[(0,u.jsx)("div",{className:"absolute left-0 top-6",children:(0,u.jsx)(H.z,{color:"neutral",onClick:_,children:(0,u.jsx)(X.L7,{className:"icon-md"})})}),null!=y&&(0,u.jsx)("div",{className:"absolute right-0 top-6",children:(0,u.jsx)(H.z,{color:"neutral",onClick:function(){window.confirm("Are you sure you want to delete this action?")&&(x(function(e){var n;return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{enabled_tools:null===(n=e.config.enabled_tools)||void 0===n?void 0:n.filter(function(e){return e.tool_id!==W.qK.JitPlugin})})})}),_())},className:"text-red-500",children:(0,u.jsx)(X.a_,{className:"icon-md"})})}),(0,u.jsx)("div",{className:"text-xl font-medium",children:(null==y?void 0:null===(i=y.data)||void 0===i?void 0:i.domain)||"Actions"}),(0,u.jsx)("div",{className:"text-sm text-token-text-tertiary",children:"Let your GPT retrieve information or take actions outside of ChatGPT"}),(0,u.jsx)("div",{className:"text-sm text-token-text-tertiary",children:(0,u.jsx)("a",{href:"https://help.openai.com/en/articles/8554397-creating-a-gpt",target:"_blank",rel:"noreferrer",className:"font-medium",children:"Learn more."})})]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"mb-1 flex h-8 items-center justify-between",children:[(0,u.jsx)("label",{className:"font-medium text-token-text-primary",children:"Schema"}),""===j&&(0,u.jsx)("div",{className:"flex items-center",children:C?(0,u.jsx)(e2,{onImport:function(e){b({raw_spec:e})},onClose:function(){I(!1)}}):(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("button",{onClick:function(){I(!0)},className:"text-sm text-token-text-secondary transition hover:text-token-text-primary",children:"Import from URL"}),(0,u.jsx)(et,{onSelectExample:function(e){b({raw_spec:e})}})]})})]}),(0,u.jsxs)("div",{className:"relative mb-8",children:[(0,u.jsx)("textarea",{value:j,onChange:function(e){b({raw_spec:e.target.value})},spellCheck:!1,placeholder:"Enter your OpenAPI schema here",className:"h-96 w-full rounded border border-token-border-light bg-transparent font-mono text-sm text-token-text-primary"}),null!=A&&(0,u.jsx)("button",{onClick:function(){b({raw_spec:JSON.stringify(A,null,2)})},className:"absolute left-0 top-full text-xs text-token-text-secondary transition hover:text-token-text-primary",children:"Format JSON"})]})]}),null!=S&&(0,u.jsx)(e4,{validationResponse:S}),(0,u.jsxs)(eB,{className:"relative mt-4",children:[(0,u.jsx)(eK,{label:"Authentication"}),(0,u.jsx)($,{content:function(e){switch(e){case K.Jv.None:return"None";case K.Jv.OAuth:return"OAuth";case K.Jv.ServiceHTTP:return"API Key"}}(null!==(s=null==y?void 0:null===(r=y.data)||void 0===r?void 0:null===(o=r.auth)||void 0===o?void 0:o.type)&&void 0!==s?s:K.Jv.None),button:(0,u.jsxs)("button",{color:"neutral",onClick:function(){T(!0)},className:"flex items-center gap-2 px-3",children:["Edit ",(0,u.jsx)(X.RR,{className:"icon-sm"})]})}),k&&(0,u.jsx)(e1,{jitPluginTool:y,onUpdateTool:function(e){switch(e.type){case K.Jv.None:b({auth:{type:K.Jv.None}});break;case K.Jv.OAuth:var n=e.oauth_client_id,t=e.oauth_client_secret;b({auth:(0,F._)(e,["oauth_client_id","oauth_client_secret"]),oauth_client_id:n,oauth_client_secret:t});break;case K.Jv.ServiceHTTP:var i=e.api_key;b({auth:(0,F._)(e,["api_key"]),api_key:i})}},onClose:function(){T(!1)}})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)(eK,{label:"Privacy Policy"}),(0,u.jsx)(Y.Z,{name:"privacyPolicyUrl",value:null!==(c=null==y?void 0:null===(a=y.data)||void 0===a?void 0:a.privacy_policy_url)&&void 0!==c?c:"",placeholder:"https://api.example-weather-app.com/privacy",onChange:function(e){b({privacy_policy_url:e.target.value})}})]})]})}var e5=t(81547),e8=t(73960),e6=t(55548),e9=t(6013),ne=t(38574),nn=t(73040),nt=t.n(nn),ni=t(37736);function nr(){var e=(0,T._)(["flex items-center gap-1"]);return nr=function(){return e},e}function no(e){var n,t=e.gizmo,i=e.promoteGizmo,r=e.setStep,o=e.showActionsModal,l=(0,h._)((0,R.useState)(!1),2),s=l[0],c=l[1],g=(0,U.ec)(U.F_.isBusinessWorkspace),x=(0,ee.Z)(),_=(0,h._)((0,R.useState)((0,d.Sg)(t)?g?S.Zz.Workspace:S.Zz.Marketplace:t.share_recipient),2),b=_[0],y=_[1],j=(0,d.WL)().data,w=(null==j?void 0:j.is_verified)?void 0:x.formatMessage(np.displayNameRequiredHint);b===S.Zz.Marketplace&&null!=w&&y(S.Zz.Link);var N=g&&!(null===(n=t.allowed_sharing_recipients)||void 0===n?void 0:n.some(function(e){return e===S.Zz.Link})),k=eL(t,b),T=k.includes(a.MissingPublicActionPrivacyPolicyURL),P=(0,U.ec)(function(e){return e.currentWorkspace});return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"mb-2 text-sm font-medium text-token-text-tertiary",children:"Publish to"}),(0,u.jsxs)("div",{className:"flex flex-col gap-3 text-sm",children:[(0,u.jsxs)(D.fC,{value:b,onValueChange:function(e){return y(e)},className:"space-y-2",children:[t.allowed_sharing_recipients&&t.allowed_sharing_recipients.map(function(e,n){return(0,u.jsx)(ex.Xb,{value:e,disabled:e===S.Zz.Marketplace&&null!=w,tooltipText:e===S.Zz.Marketplace?null!=w?w:x.formatMessage(np.publicSharingHint):void 0,label:(0,e8.MI)(e,P,x)},n)}),N&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ex.Xb,{value:S.Zz.Link,disabled:!0,tooltipText:x.formatMessage(np.workspaceDisabledHint),label:(0,e8.MI)(S.Zz.Link,P,x)}),(0,u.jsx)(ex.Xb,{value:S.Zz.Marketplace,disabled:!0,tooltipText:x.formatMessage(np.workspaceDisabledHint),label:(0,e8.MI)(S.Zz.Marketplace,P,x)})]})]}),T&&(0,u.jsx)("div",{className:"text-xs text-red-500",children:(0,u.jsx)(eT.Z,(0,p._)((0,m._)({},np.actionNeedsPrivacyPolicyURL),{values:{fixlink:function(e){return(0,u.jsx)("button",{onClick:function(){o()},className:"underline",children:e})}}}))}),b!==S.Zz.Private&&(0,u.jsx)(ni.QT,{gizmoAvatar:t.profile_pic_permalink,gizmoName:t.name,canEdit:!0}),(0,u.jsx)(ex.cY,{color:"primary",disabled:k.length>0,loading:s,onClick:(0,f._)(function(){var e;return(0,v.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,,2,3]),c(!0),[4,i(b)];case 1:if(null==(e=n.sent()))return[2];return 1===e.live_version?J().push((0,d.m_)(e)):r({type:"published",publishedGizmo:e}),[3,3];case 2:return c(!1),[7];case 3:return[2]}})}),className:"w-full",children:(0,u.jsx)(eT.Z,(0,m._)({},np.privacyConfirm))})]})]})}function na(e){var n=e.publishedGizmo,t="".concat("https://chat.openai.com").concat((0,d.m_)(n));return(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsx)("div",{className:"font-medium",children:"Published!"}),(0,u.jsxs)("div",{className:"flex gap-1 rounded bg-token-surface-secondary px-2 py-1",children:[(0,u.jsx)("div",{className:"text-ellipsis break-all line-clamp-1",children:t}),(0,u.jsx)("button",{onClick:(0,f._)(function(){return(0,v.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,ne.S)(t)];case 1:return e.sent(),[2]}})}),className:"text-token-text-secondary transition hover:text-token-text-primary",children:(0,u.jsx)(X.dS,{className:"icon-sm"})})]}),(0,u.jsx)(ex.cY,{color:"primary",as:"link",to:t,className:"w-full",children:"View GPT"})]})}function nl(e){var n=e.gizmo,t=e.promoteGizmo,i=e.showActionsModal,r=(0,h._)((0,R.useState)({type:"privacy"}),2),o=r[0],a=r[1];return(0,u.jsx)("div",{className:"w-60 rounded-lg border border-token-border-medium bg-token-surface-primary p-4 text-sm",children:"privacy"===o.type?(0,u.jsx)(no,{gizmo:n,promoteGizmo:t,setStep:a,showActionsModal:i}):(0,u.jsx)(na,{publishedGizmo:o.publishedGizmo})})}function ns(e){var n,t=e.gizmo,i=e.isLoading,r=e.isUploadingProfilePic,o=e.isGeneratingProfilePic,l=e.promoteGizmo,s=e.hasUnpublishedChanges,c=e.showActionsModal,f=null!=t?eL(t):[],m=(0,ee.Z)();(null==t||i)&&f.push(a.Loading),r&&f.push(a.UploadingProfilePic),o&&f.push(a.GeneratingProfilePic);var p=(0,d.Sg)(t);return(0,u.jsxs)(e9.fC,{modal:!0,children:[(0,u.jsx)(e9.xz,{asChild:!0,children:(0,u.jsx)(ex.cY,{color:"primary",className:"cursor-pointer whitespace-nowrap",disabled:void 0===t.id,tooltip:f.length>0?f.map(eU).join("\n"):void 0,children:(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[s&&!p?m.formatMessage(np.publishChanges):m.formatMessage(np.save),(0,u.jsx)(X.ud,{})]})})}),(0,u.jsx)(e9.h_,{children:(0,u.jsx)(e9.VY,{side:"bottom",align:"end",sideOffset:8,children:(0,u.jsx)(nl,{gizmo:t,promoteGizmo:l,showActionsModal:c})})})]})}function nc(e){var n=e.gizmoTemplate,t=(0,h._)((0,R.useState)(!1),2),i=t[0],r=t[1],o=(0,U.hz)();return o.has("debug")||(null==n?void 0:n.id)!=null?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(el.fC,{children:[(0,u.jsx)(el.xz,{asChild:!0,children:(0,u.jsx)(ex.cY,{children:(0,u.jsx)(X.Yr,{className:"icon-md"})})}),(0,u.jsx)(el.Uv,{children:(0,u.jsxs)(el.VY,{className:"min-w-[180px] max-w-xs rounded-lg border border-gray-100 bg-token-surface-primary py-1.5 shadow-lg dark:border-gray-700",side:"top",align:"end",sideOffset:6,children:[o.has("debug")&&(0,u.jsxs)(ex.UA,{onClick:function(){e6.vm.toggleActiveSidebar("debug")},children:[(0,u.jsx)(X.WP,{className:"icon-md"}),"Debug (Internal only)"]}),(null==n?void 0:n.id)!=null&&(0,u.jsxs)(ex.UA,{color:"danger",onClick:function(){r(!0)},children:[(0,u.jsx)(X.a_,{className:"icon-md"}),(0,u.jsx)(eT.Z,(0,m._)({},np.deleteGPT))]})]})})]}),i&&(0,u.jsx)(e5.b,{gizmoTemplate:n,onSuccess:function(){J().push((0,Z.cy)())},onClose:function(){r(!1)}})]}):null}var nu=P.Z.div(nr());function nd(e){var n=e.gizmoTemplate,t=(0,U.ec)(function(e){var n;return null===(n=e.currentWorkspace)||void 0===n?void 0:n.name});switch(n.share_recipient){case S.Zz.Private:return(0,u.jsxs)(nu,{children:[(0,u.jsx)(X.LX,{className:"icon-xs"}),"Only me"]});case S.Zz.Link:return(0,u.jsxs)(nu,{children:[(0,u.jsx)(X.HN,{className:"icon-xs"}),"Anyone with a link"]});case S.Zz.Workspace:return(0,u.jsxs)(nu,{children:[(0,u.jsx)(X.oq,{className:"icon-xs"}),t]});case S.Zz.Marketplace:return(0,u.jsxs)(nu,{children:[(0,u.jsx)(X.hk,{className:"icon-xs"}),"Public"]})}return(0,u.jsx)("div",{})}function nf(e){var n,t=e.gizmoTemplate,i=!!(null===(n=t.config.tags)||void 0===n?void 0:n.includes(S.U9.FirstParty));return(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[null!=t.profile_pic_permalink?(0,u.jsx)(ev.Z,{isFirstParty:i,src:t.profile_pic_permalink,className:"h-8 w-8"}):(0,u.jsx)("div",{className:"h-8 w-8 rounded-full border-2 border-dashed border-token-border-medium"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"text-sm font-medium",children:t.name||"New GPT"}),(0,u.jsx)("div",{className:"text-xs text-token-text-secondary",children:(0,d.Sg)(t)?(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-token-text-tertiary"}),"Draft"]}):(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-brand-green"}),"Published \xb7 ",(0,u.jsx)(nd,{gizmoTemplate:t})]})})]})]})}function nm(e){var n=e.gizmoTemplate,t=e.isLoading,i=e.isUploadingProfilePic,r=e.isGeneratingProfilePic,o=e.promoteGizmo,a=e.draftMessage,l=e.className,s=e.hasUnpublishedChanges,c=e.showActionsModal;return(0,u.jsxs)("div",{className:(0,q.default)("relative flex h-14 w-full items-center justify-between gap-2 border-b border-token-border-medium px-3",l),children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(nt(),{href:(0,Z.cy)(),shallow:!0,className:"text-token-text-primary",children:(0,u.jsx)(X.L7,{className:"icon-lg"})}),(0,u.jsx)(nf,{gizmoTemplate:n})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[a,(0,u.jsx)(nc,{gizmoTemplate:n}),(0,u.jsx)(ns,{gizmo:n,isLoading:t,isUploadingProfilePic:i,isGeneratingProfilePic:r,promoteGizmo:o,hasUnpublishedChanges:s,showActionsModal:c})]})]})}var np=(0,en.vU)({privacyConfirm:{id:"gizmo.confirmPublish",defaultMessage:"Confirm",description:"Message prompting you to confirm publication of an action"},workspaceDisabledHint:{id:"gizmo.workspaceDisabledHint",defaultMessage:"Your workspace administrator has disabled this setting",description:"Message saying your workspace administrator isn't allowing something"},publicSharingHint:{id:"gizmo.publicSharingHint",defaultMessage:"This GPT may appear in the GPT Store (coming soon)",description:"Message hinting at what public privacy settings do"},displayNameRequiredHint:{id:"gizmo.displayNameRequiredHint",defaultMessage:"To make your GPT public, set up your builder profile.",description:"Message hinting that you have to setup a builder profile to publish"},save:{id:"gizmo.save",defaultMessage:"Save",description:"Button label for save (publishing)"},publishChanges:{id:"gizmo.publishChanges",defaultMessage:"Update",description:"Button label for publishing changes"},deleteGPT:{id:"gizmo.delete",defaultMessage:"Delete GPT",description:"Button label for deleting a GPT"},actionNeedsPrivacyPolicyURL:{id:"gizmo.actionNeedsPrivacyPolicyURL",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",description:"Error message when trying to publish action"}}),nh=t(93028);function ng(e){var n=function(e){if(Array.isArray(e)){var n=(0,O.compact)(e.map(function(e){if("string"==typeof e.msg)return e.msg}));return n.length>0?n.join("\n"):void 0}}(e.upsertDraftError.response);return(0,u.jsxs)("div",{className:"flex items-center gap-2 text-red-500",children:[(0,u.jsx)("div",{children:(0,u.jsx)(eT.Z,(0,m._)({},nx.errorSavingDraft))}),null!=n&&(0,u.jsx)(ea.u,{label:n,children:(0,u.jsx)(ec.H33,{className:"icon-sm"})})]})}function nv(e){var n=e.gizmoTemplate,t=e.revertDraft,i=e.isSavingDraft,r=e.hasUnpublishedChanges,o=e.upsertDraftError,a=e.className,l=(0,d.kg)(null==n?void 0:n.id),s=l.data,c=l.isLoading,f=(0,h._)((0,R.useState)(!1),2),m=f[0],p=f[1];if(o instanceof nh.Q0)return(0,u.jsx)(ng,{upsertDraftError:o});if(!r)return null;var g=!c&&(null==n?void 0:n.id)!=null&&null!=s;return(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsxs)("button",{className:(0,q.default)("relative w-full truncate py-1.5 text-token-text-secondary",!g&&"cursor-default",a),onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},onClick:function(){g&&t()},children:[(0,u.jsx)("span",{children:"Unpublished changes"}),m&&null!=s&&g&&(0,u.jsxs)("div",{className:"absolute inset-0 flex items-center justify-end gap-1 bg-token-surface-primary",children:[(0,u.jsx)(ec.bxQ,{className:"icon-sm"}),"Undo"]})]}),(0,u.jsx)("div",{className:"w-4 text-token-text-tertiary",children:i&&(0,u.jsx)(G.Z,{})})]})}var nx=(0,en.vU)({errorSavingDraft:{id:"gizmo.errorSavingDraft",defaultMessage:"Error saving draft",description:"Error message when saving a draft fails"}}),n_=t(73779),nb=t(22048);function ny(e){var n=e.clientThreadId,t=(0,E.oq)(n),i=(0,E.U0)(n,t),r=(0,E.Ro)(n),o=(0,g._)(Array(i).keys()).map(function(e){var o;return(0,u.jsx)(nb.Z,{isFinalTurn:e===i-1,turnIndex:e,clientThreadId:n,conversationLeafId:t,onChangeItemInView:O.noop,onChangeRating:O.noop,onRequestMoreCompletions:O.noop,onRequestCompletion:O.noop,currentModelId:null!==(o=null==r?void 0:r.id)&&void 0!==o?o:""},e)});return(0,u.jsx)(u.Fragment,{children:o})}function nj(e){var n=e.clientThreadIds;return(0,u.jsx)(u.Fragment,{children:n.map(function(e){return(0,u.jsx)(ny,{clientThreadId:e},e)})})}var nw=t(47478),nN=t(82713),nk=t(45567),nT=t(27573);function nP(){return(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"border-token-border-secondary flex-grow border-b"}),(0,u.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-2 px-2 text-sm text-token-text-tertiary",children:[(0,u.jsx)(ec.V7f,{}),"GPT Updated"]}),(0,u.jsx)("div",{className:"border-token-border-secondary flex-grow border-b"})]})}(r=l||(l={}))[r.MAGIC=1]="MAGIC",r[r.SANDBOX=2]="SANDBOX";var nC=R.memo(function(e){var n,t=e.gizmoTemplate,i=e.isSavingDraft,r=e.showTitle,o=(0,h._)((0,R.useState)(function(){return(0,E.OX)()}),2),a=o[0],l=o[1],s=(0,h._)((0,R.useState)([]),2),c=s[0],d=s[1];(0,R.useEffect)(function(){d(function(e){return e[e.length-1]===a?e:(0,g._)(e).concat([a])})},[a]);var f=c.slice(0,-1);(0,E.ax)(a);var m=(0,E.UL)(a);(0,R.useEffect)(function(){null!=t.id&&E.tQ.setNewThreadConversationModeMetadata(a,{kind:K.OL.GizmoTest,gizmo_id:t.id,behavior_overrides:t.config})},[a,t.id,t.config]);var p=null===(n=t.config.files)||void 0===n?void 0:n.map(function(e){return e.file_id}).join();(0,R.useEffect)(function(){null!=E.tQ.getServerThreadId(a)&&l((0,E.OX)())},[t.id,t.config.context_message,t.config.assistant_welcome_message,t.config.enabled_tools,p,a]),(0,R.useEffect)(function(){(0,E.Zz)(a)&&E.iN.hasThread(a)&&m.lastModelUsed!==ey.mx&&(E.tQ.getOrInitThread(a),E.tQ.updateInitialThreadDataForNewThread(a,ey.mx,[]))},[a,m,t]);var v=(0,e6.tN)(function(e){return e.activeSidebar}),x=(0,R.useMemo)(function(){return{gizmoTemplate:t,mode:"test"}},[t]),_=(0,h._)((0,R.useState)(0),2),b=_[0],y=_[1],j=function(){y(function(e){return e-360})};return(0,u.jsx)(n_.DP.Provider,{value:x,children:(0,u.jsxs)("div",{className:(0,q.default)("flex h-full w-full",i&&"cursor-wait opacity-80 transition"),children:[(0,u.jsxs)("div",{className:"flex grow flex-col",children:[(0,u.jsx)("div",{className:"relative mb-2 flex-shrink-0",children:(0,u.jsx)("div",{className:"flex justify-center py-3",children:(void 0===r||r)&&(0,u.jsxs)("div",{className:"group flex items-center gap-2 text-lg font-medium",children:[(0,u.jsx)("div",{className:"icon-md"}),(0,u.jsxs)("button",{onClick:function(){j(),d([]),l((0,E.OX)())},className:"flex items-center gap-2",children:["Preview",(0,u.jsx)(eN.E.div,{className:"text-token-text-primary",animate:{rotate:b},transition:{duration:.3},children:(0,u.jsx)(X.Ze,{className:"icon-md invisible group-hover:visible"})})]})]})})}),(0,u.jsx)("div",{className:(0,q.default)("relative grow overflow-auto px-4",i&&"pointer-events-none"),children:(0,u.jsx)(nN.Z,{initialThreadData:m,clientThreadId:a,hideHeader:!0,renderEmptyState:(0,u.jsxs)("div",{className:"relative h-full w-full",children:[null!=f&&f.length>0&&(0,u.jsx)("div",{className:"h-full w-full opacity-20",children:(0,u.jsxs)(nk.I,{children:[(0,u.jsx)(nj,{clientThreadIds:f}),(0,u.jsx)(nP,{})]})}),(0,u.jsx)("div",{className:"absolute left-0 top-0 h-full w-full",children:(0,u.jsx)(nT.r,{gizmo:t,isOwner:!0,hideOwner:!0})})]}),prependThreadChildren:f.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"opacity-50",children:(0,u.jsx)(nj,{clientThreadIds:f})}),(0,u.jsx)(nP,{})]})})})]}),"debug"===v&&(0,u.jsx)(nw.fv,{clientThreadId:a,slideOver:!1,onClose:function(){return e6.vm.toggleActiveSidebar("debug")},isOpen:!0})]})})}),nI=t(9304),nz=t(15066),nS=t(2064),nG=t(8844);function nM(){return(nM=(0,f._)(function(e){var n,t,i,r,o,a,l,s,c,u,d,f,m,p,h;return(0,v.Jh)(this,function(g){switch(g.label){case 0:t=!0,i=!1,r=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)if(l=a.value,"gizmo_editor.generate_profile_pic"===l.author.name&&"multimodal_text"===l.content.content_type){s=!0,c=!1,u=void 0;try{for(d=l.content.parts[Symbol.iterator]();!(s=(f=d.next()).done);s=!0)m=f.value,"object"==typeof m&&"asset_pointer"in m&&(n=m)}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}}}catch(e){i=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw r}}if(!(null!=n))return[3,2];return p=(0,eg.Iy)(n.asset_pointer),[4,ej.ZP.getFileDownloadLink(p)];case 1:if((h=g.sent()).status===W.KF.Success)return[2,{id:p,permalink:h.download_url}];g.label=2;case 2:return[2]}})})).apply(this,arguments)}function nA(){return(nA=(0,f._)(function(e,n,t){var i,r,o,a,l,s,c,u,d,f,p;return(0,v.Jh)(this,function(h){switch(h.label){case 0:return r=(i=function(e,n){for(var t=E.tQ.getThreadCurrentLeafId(e),i=E.tQ.getTree(e),r=[],o=i.getNodeByIdOrMessageId(t);null!=o&&(null==n||o.id!==n);)r.unshift(o.message),o=""!==o.parentId?i.getNodeByIdOrMessageId(o.parentId):void 0;return r}(n,t)).filter(function(e){return"gizmo_editor.update_behavior"===e.recipient}).flatMap(function(e){return"text"===e.content.content_type?e.content.parts:"code"===e.content.content_type?[e.content.text]:[]}).map(function(e){return JSON.parse(e)}).reduce(function(e,n){return(0,m._)({},e,n)},{}),[4,function(e){return nM.apply(this,arguments)}(i)];case 1:if(o=h.sent(),(0,O.isEmpty)(r)&&null==o)return[2];if(a=r.name,l=r.context,s=r.description,c=r.welcome_message,u=r.profile_pic_file_id,d=r.prompt_starters,!(null!=u))return[3,5];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,ej.ZP.getFileDownloadLink(u,e.id)];case 3:return(f=h.sent()).status===W.KF.Success&&(o={id:u,permalink:f.download_url}),[3,5];case 4:return p=h.sent(),console.error("Error while retrieving profile pic in update: ".concat(p)),M.m.warning("Something went wrong updating your GPT's profile picture.",{duration:3}),[3,5];case 5:return[2,(0,O.pickBy)({name:"string"==typeof a?a:void 0,description:"string"==typeof s?s:void 0,config:(0,O.pickBy)({context_message:"string"==typeof l?l:void 0,assistant_welcome_message:"string"==typeof c?c:void 0,prompt_starters:Array.isArray(d)?d:void 0},function(e){return null!=e}),profile_pic_id:null==o?void 0:o.id,profile_pic_permalink:null==o?void 0:o.permalink},function(e){return null!=e})]}})})).apply(this,arguments)}function nE(e,n,t,i){var r,o,a,l,s,c,u,d,f,m,p,h,g,v,x=t.current,_=i.current;if(!(0,O.isEqual)(x,_)){var b={};x.name!==(null==_?void 0:_.name)&&(b.name=x.name),(null!==(a=x.description)&&void 0!==a?a:"")!==(null!==(l=null==_?void 0:_.description)&&void 0!==l?l:"")&&(b.description=null!==(s=x.description)&&void 0!==s?s:""),x.config.context_message!==(null!==(c=null==_?void 0:_.config.context_message)&&void 0!==c?c:"")&&(b.context=null!==(u=x.config.context_message)&&void 0!==u?u:""),(null!==(d=x.config.assistant_welcome_message)&&void 0!==d?d:"")!==(null!==(f=null==_?void 0:_.config.assistant_welcome_message)&&void 0!==f?f:"")&&(b.welcome_message=null!==(m=x.config.assistant_welcome_message)&&void 0!==m?m:"");var y=new Set(null!==(p=null===(r=null==_?void 0:_.config.files)||void 0===r?void 0:r.map(function(e){return e.file_id}))&&void 0!==p?p:[]),j=new Set(null!==(h=null===(o=x.config.files)||void 0===o?void 0:o.map(function(e){return e.file_id}))&&void 0!==h?h:[]),w=(null!==(g=x.config.files)&&void 0!==g?g:[]).filter(function(e){return!y.has(e.file_id)}),N=(null!==(v=null==_?void 0:_.config.files)&&void 0!==v?v:[]).filter(function(e){return!j.has(e.file_id)});if(!(0,O.isEmpty)(b)||0!==w.length||0!==N.length){var k=[];if(!(0,O.isEmpty)(b)){var T="Explicitly update the GPT's behavior to the following exact fields:\n\n    ".concat(JSON.stringify(b,null,2),'\n\n    "Do not call update_behavior yet. Instead, use these updated fields as the GPT\'s current behavior, and in the next call to update_behavior, incorporate these changes."\n    ');k.push(nz.Cv.getTextAsMessage(T,K.uU.System))}N.length>0&&k.push(nz.Cv.getTextAsMessage("The user has removed the following files from the GPT. You can no longer reference these files: ".concat(N.map(function(e){return e.file_id}).join(", ")),K.uU.System)),w.length>0&&k.push(nz.Cv.getTextAsMessage("The user is adding these files to the GPT. The GPT may reference these files. The file IDs are: ".concat(w.map(function(e){return e.file_id}).join(", ")),K.uU.System,{attachments:w.map(function(e){return{id:e.file_id,name:e.name,size:e.size}})})),k.length>0&&E.tQ.updateTree(e,function(e){var t=e.getNodeByIdOrMessageId(n).parentId,i=!0,r=!1,o=void 0;try{for(var a,l=k[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value,c=(0,nG.Z)();e.insertNodeBefore(n,{id:c,children:[],parentId:t,message:s,metadata:{isClientCreatedSystemMessage:!0}}),t=c}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}})}}}var nU=t(12543),nL=R.memo(function(e){var n=e.gizmoTemplate,t=e.updateGizmo,i=e.clientThreadId,r=e.completionCallbackResponse,o=e.gizmoRef,a=e.magicMakerConversationGizmoRef,l=e.magicMakerTemplate,s=e.requireGizmoId;(0,E.ax)(i);var c=(0,E.UL)(i);null==l.config.model_slug&&(l.config.model_slug=ey.Mw);var d=null==n.id,f=null!=n.id&&""!==n.name&&null!=n.description&&""!==n.config.context_message&&null!=n.profile_pic_permalink,v=(0,h._)((0,R.useState)(d?'Hi! I\'ll help you build a new GPT. You can say something like, "make a creative who helps generate visuals for new products" or "make a software engineer who helps format my code."\n\nWhat would you like to make?':f?"Welcome back! Is there anything ".concat(n.name," should be doing better? Anything you'd like to change?"):"You're back! Let's continue where we left off..."),1)[0];(0,_.BZ)(i,v),(0,R.useEffect)(function(){(0,E.Zz)(i)&&E.iN.hasThread(i)&&c.lastModelUsed!==l.config.model_slug&&(E.tQ.getOrInitThread(i),E.tQ.updateInitialThreadDataForNewThread(i,l.config.model_slug,[]))},[i,c,l,c.lastModelUsed,l.config.model_slug]);var x=(0,R.useMemo)(function(){return{magicTemplate:l,gizmoTemplate:n,gizmoId:n.id,mode:"magic",getGizmoId:s}},[l,s,n]),b=(0,nU.gF)(function(e){return e.files.filter(function(e){return e.status===ep.X.Ready&&null!=e.gizmoId})}),y=(0,R.useCallback)(function(e,n){var i;!function(e,n,t){if(0!==t.length){var i=(0,nG.Z)(),r="The user is uploading files in their next message. If you need to reference these in calls to update_behavior, you will use the following File ID(s), in order: ".concat(t.map(function(e){return'"'.concat(e.fileId,'"')}).join(", "));E.tQ.updateTree(e,function(e){var t=e.getNodeByIdOrMessageId(n).parentId;e.insertNodeBefore(n,{id:i,children:[],parentId:t,message:nz.Cv.getTextAsMessage(r,K.uU.System),metadata:{isClientCreatedSystemMessage:!0}})})}}(e,n,b),nE(e,n,o,a),function(e,n){for(var t="Remember, you should be calling either update_behavior or generate_profile_pic after most messages from the user. Your personality should be neutral and separate from the GPT you are creating.",i=E.tQ.getThreadCurrentLeafId(e),r=E.tQ.getTree(e),o=r.getNodeByIdOrMessageId(i);null!=o&&o.message.author.role!==K.uU.User;){if("text"===o.message.content.content_type&&o.message.content.parts[0]===t)return;o=""!==o.parentId?r.getNodeByIdOrMessageId(o.parentId):void 0}E.tQ.updateTree(e,function(e){var i=e.getNodeByIdOrMessageId(n).parentId;e.insertNodeBefore(n,{id:(0,nG.Z)(),children:[],parentId:i,message:nz.Cv.getTextAsMessage(t,K.uU.System,{exclude_after_next_user_message:!0}),metadata:{isClientCreatedSystemMessage:!0}})})}(e,n),t(function(e){return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{files:(0,g._)(null!==(i=e.config.files)&&void 0!==i?i:[]).concat((0,g._)((0,O.compact)(b.map(function(e){var n;return null!=e.fileId&&{file_id:e.fileId,name:e.file.name,size:e.file.size,type:e.file.type,last_modified:e.file.lastModified,file_size_tokens:null===(n=e.fileSpec)||void 0===n?void 0:n.fileTokenSize}}))))})})}),a.current=(0,O.cloneDeep)(o.current)},[o,a,b,t]),j=(0,e6.tN)(function(e){return e.activeSidebar});return(0,u.jsx)(n_.DP.Provider,{value:x,children:(0,u.jsxs)("div",{className:"relative flex h-full grow overflow-auto rounded-xl",children:[(0,u.jsx)("div",{className:"grow pt-6",children:(0,u.jsx)(nN.Z,{initialThreadData:c,clientThreadId:i,onCompletionFinished:r,preRequestCompletion:y,hideHeader:!0})}),"debug"===j&&(0,u.jsx)(nw.fv,{clientThreadId:i,slideOver:!1,onClose:function(){return e6.vm.toggleActiveSidebar("debug")},isOpen:!0})]})})});function nZ(e){var n=e.value,t=e.label;return(0,u.jsx)(D.ck,{value:n,className:"text-md w-1/3 flex-grow rounded-lg border-token-border-light p-1.5 font-medium text-token-text-tertiary transition hover:text-token-text-primary radix-state-checked:border radix-state-checked:bg-token-surface-primary radix-state-checked:text-token-text-primary radix-state-checked:shadow-[0_0_2px_rgba(0,0,0,.03)] radix-state-checked:dark:bg-token-surface-secondary md:w-1/2",children:t})}function nR(e){var n=e.className,t=e.editorTab,i=e.setEditorTab;return(0,u.jsxs)(D.fC,{className:(0,q.default)("flex w-full overflow-hidden rounded-xl bg-token-surface-secondary p-1.5 dark:bg-token-surface-tertiary md:w-1/2",n),value:t,onValueChange:function(e){i(e)},children:[(0,u.jsx)(nZ,{value:s.MAGIC_MAKER,label:"Create"}),(0,u.jsx)(nZ,{value:s.ADVANCED,label:"Configure"}),(0,u.jsx)("div",{className:"flex w-1/3 md:hidden",children:(0,u.jsx)(nZ,{value:s.PREVIEW,label:"Preview"})})]})}(o=s||(s={})).MAGIC_MAKER="magic",o.ADVANCED="advanced",o.PREVIEW="preview";var nD=(0,p._)((0,m._)({},x.x),{config:(0,p._)((0,m._)({},x.x.config),{enabled_tools:(0,g._)(null!==(c=x.x.config.enabled_tools)&&void 0!==c?c:[]).concat([{tool_id:"browser"}])})}),nV=function(e){var n,t,i,r,o,a,l,c,g,y,j,w,N,T=e.businessWorkspaceId,P=e.gizmo,C=e.onNewGizmoId,I=function(e){var n,t,i="function"==typeof e?e(L.current):(n=L.current,null==(t=e)?n:(t=function e(n){return"object"==typeof n&&null!=n?Array.isArray(n)?n.map(e):Object.fromEntries(Object.entries(n).map(function(n){var t=(0,h._)(n,2);return[t[0],e(t[1])]})):null===n?void 0:n}(t),(0,p._)((0,m._)({},n,t),{config:(0,m._)({},n.config,t.config)})));(0,O.isEqual)(i,L.current)||(L.current=i,F(L.current),ea())},G=(0,b.C)(A.L0.BrowseAvailable),L=(0,R.useRef)(null!=P?P:G?nD:x.x),Z=(0,R.useRef)(P),D=(0,R.useRef)(L.current),B=(0,h._)((0,R.useState)(function(){return L.current}),2),J=B[0],F=B[1],W=(0,h._)((0,R.useState)(function(){return(0,E.OX)()}),2),H=W[0];W[1];var X=(0,d.kg)(L.current.id).data,Y=(0,d.N_)(),Q=Y.isPending,$=Y.error,ee=(0,d.ZJ)(),en=(0,R.useMemo)(function(){var e,n,t,i;return null!=X&&(!(J.name===X.name&&J.description===X.description&&J.config.assistant_welcome_message===X.config.assistant_welcome_message&&J.config.context_message===X.config.context_message&&(0,O.isEqual)(J.config.enabled_tools,X.config.enabled_tools)&&(0,O.isEqual)(null!==(t=null===(e=J.config.files)||void 0===e?void 0:e.map(function(e){return e.file_id}))&&void 0!==t?t:[],null!==(i=null===(n=X.config.files)||void 0===n?void 0:n.map(function(e){return e.file_id}))&&void 0!==i?i:[]))||J.profile_pic_id!==X.profile_pic_id||J.profile_pic_permalink!==X.profile_pic_permalink)},[J,X]),et=(null==P?void 0:null===(N=P.appeal_info)||void 0===N?void 0:N.state.kind)==="appeal_sent",ei=(n=(0,f._)(function(){var e,n,t,i;return(0,v.Jh)(this,function(r){switch(r.label){case 0:e=L.current,r.label=1;case 1:var o,a,l;return r.trys.push([1,3,,4]),[4,Y.mutateAsync({templateData:{name:(o=e).name,description:null!==(a=o.description)&&void 0!==a?a:"",config:{contextMessage:o.config.context_message,assistantWelcomeMessage:null!==(l=o.config.assistant_welcome_message)&&void 0!==l?l:"Hello",enabledTools:o.config.enabled_tools,promptStarters:o.config.prompt_starters},publish:null!=o.published_at,icon:_.bj.Box,color:(0,_.yq)(),profilePicId:o.profile_pic_id,profilePictureUrl:null==o.profile_pic_id?o.profile_pic_permalink:void 0,workspaceId:T,files:(0,O.uniqBy)(o.config.files,"file_id"),trainingDisabled:o.training_disabled},gizmoId:e.id})];case 2:return n=r.sent(),Z.current=n,null==L.current.id&&(t=n.id,L.current=(0,p._)((0,m._)({},L.current),{id:t,allowed_sharing_recipients:n.allowed_sharing_recipients}),F(L.current),null==C||C(t)),[2,n];case 3:throw i=r.sent(),M.m.warning("Error saving draft",{duration:2}),i;case 4:return[2]}})}),function(){return n.apply(this,arguments)}),er=(0,R.useRef)(),eo=(t=(0,f._)(function(){return(0,v.Jh)(this,function(e){return null!=L.current.id?[2,L.current.id]:(null==er.current&&(er.current=ei().then(function(e){return e.id}).catch(function(e){throw er.current=void 0,e})),[2,er.current])})}),function(){return t.apply(this,arguments)}),ea=(0,h._)((0,R.useState)(function(){return(0,O.debounce)(function(){return ei()},2e3,{trailing:!0})}),1)[0],el=(0,h._)((0,R.useState)(function(){return function(e){var n,t,i,r,o=new Set,a=!0,l=!1,s=void 0;try{for(var c,u,d=(null!==(c=e.config.enabled_tools)&&void 0!==c?c:[])[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;o.add(f.tool_id)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}var h=null!==(n=e.name)&&void 0!==n?n:"",g=null!==(t=e.description)&&void 0!==t?t:"",v=null!==(i=e.config.context_message)&&void 0!==i?i:"",x=Array.from(o).join(","),_=null!==(r=e.config.assistant_welcome_message)&&void 0!==r?r:"",b=""===h&&""===g&&""===v&&""===_,y=null!=e.profile_pic_id,j=b?"The GPT you are about to has the following abilities: ".concat(x,"."):"This is the GPT's current set of fields:\n\nname: ".concat(h,"\n\ndescription: ").concat(g,"\n\ncontext: ").concat(v,"\n\nabilities: ").concat(x,"\n\nwelcome_message: ").concat(_,"\n\n").concat(y?"The GPT has a profile picture.":"This GPT does not have a profile picture. You must generate a profile picture when you next update your behavior.","\n");return(0,p._)((0,m._)({},e),{config:(0,p._)((0,m._)({},e.config),{context_message:j,model_slug:ey.Mw,enabled_tools:[{tool_id:b?"gizmo_creator":"gizmo_editor"}]})})}(L.current)}),1)[0],es=(0,R.useRef)(),ec=(i=(0,f._)(function(e){var n;return(0,v.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),[4,function(e,n,t){return nA.apply(this,arguments)}(L.current,e,es.current)];case 1:return null!=(n=t.sent())&&(I(n),D.current=(0,O.cloneDeep)(L.current)),[3,4];case 2:return console.error(t.sent()),M.m.warning("Something went wrong generating your GPT",{duration:3}),[3,4];case 3:return es.current=E.tQ.getThreadCurrentLeafId(e),[7];case 4:return eG(!1),[2]}})}),function(e){return i.apply(this,arguments)}),eu=(r=el.config,o=(0,nI.Z)(H,void 0,O.noop,O.noop,ec,[]),a=(0,U.hz)(),l=(0,f._)(function(e,n,t){var i,l,s,c,u,d,f,m,p,h,g,x,_,b;return(0,v.Jh)(this,function(v){switch(v.label){case 0:if(0===t.length)return[2];i=E.tQ.getThreadCurrentLeafId(H),l=!0,s=!1,c=void 0;try{for(u=t[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=d.value,m=(0,nG.Z)(),E.tQ.updateTree(H,function(e){e.addNodeToEnd(i,{id:m,children:[],parentId:i,message:nz.Cv.getTextAsMessage(f,K.uU.System),metadata:{isClientCreatedSystemMessage:!0}})}),E.tQ.setThreadCurrentLeafId(H,m),i=m}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}if(p=i,nE(H,p,e,n),h={conversationMode:{kind:K.OL.GizmoMagicCreate,behavior_overrides:r,gizmo_id:e.current.id}},g=[ey.S.GPT_4],x=(0,nS.Rr)(a,g,K.OL.GizmoMagicCreate),_=null,!x)return[3,2];return[4,nS.ZP.getEnforcementToken(g)];case 1:_=v.sent(),v.label=2;case 2:return o({model:null!==(b=e.current.config.model_slug)&&void 0!==b?b:ey.Mw,completionType:K.Os.Next,parentNodeId:p,metadata:{},focusOnNewCompletion:!0,arkoseToken:_,preflightTime:0,completionMetadata:h,extraStreamParams:{}}),[2]}})}),function(e,n,t){return l.apply(this,arguments)}),ed=(0,h._)((0,R.useState)(!1),2),ef=ed[0],em=ed[1],ep=(0,h._)((0,R.useState)(!1),2),eh=ep[0],eg=ep[1],ev=(0,h._)((0,R.useState)(void 0),2),ex=ev[0],e_=ev[1],eb=(c=(0,f._)(function(e){var n,t,i,r;return(0,v.Jh)(this,function(o){switch(o.label){case 0:if((n=eL(L.current,e)).length>0)return M.m.warning("Could not save GPT:\n\n".concat(n.map(function(e){return"- ".concat(eU(e))}).join("\n")),{duration:3}),[2];return[4,ei()];case 1:i=(t=o.sent()).id,o.label=2;case 2:return o.trys.push([2,4,,5]),e_({gizmoId:i,sharingRecipient:e}),[4,ee.mutateAsync({gizmoId:t.id,data:{sharingRecipient:e}},{onSuccess:function(e){V.E.setQueryData((0,d.Vw)(i).queryKey,e),V.E.invalidateQueries({queryKey:["gizmos"]}),V.E.invalidateQueries({queryKey:["gizmo",{gizmoId:i}]})}})];case 3:return[2,o.sent()];case 4:return(r=o.sent())instanceof S.DC?(em(!!r.response.is_flagged_brand_name),eg(!0)):(console.error(r),M.m.warning("Error saving GPT",{duration:2})),[3,5];case 5:return[2]}})}),function(e){return c.apply(this,arguments)}),ej=Y.isPending||ee.isPending,ew=(0,h._)((0,R.useState)(s.MAGIC_MAKER),2),eN=ew[0],ek=ew[1],eT=(y=(g=(0,h._)((0,R.useState)({width:null,height:null}),2))[0],j=g[1],(0,R.useLayoutEffect)(function(){var e=function(){j({width:window.innerWidth,height:window.innerHeight})};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),y).width;(0,R.useEffect)(function(){null!=eT&&eT>=768&&eN===s.PREVIEW&&ek(s.MAGIC_MAKER)},[eT,eN]);var eP=(0,h._)((0,R.useState)(!1),2),eC=eP[0],eI=eP[1],ez=(0,h._)((0,R.useState)(!1),2),eS=ez[0],eG=ez[1],eM=(0,h._)((0,R.useState)(!1),2),eA=eM[0],eE=eM[1];return(0,u.jsxs)("div",{className:"flex h-screen w-full flex-col items-center",children:[(0,u.jsx)(nm,{gizmoTemplate:J,isLoading:ej,hasUnpublishedChanges:en,isUploadingProfilePic:eC,isGeneratingProfilePic:eS,promoteGizmo:(w=(0,f._)(function(e){var n;return(0,v.Jh)(this,function(t){switch(t.label){case 0:return[4,eb(e)];case 1:return n=t.sent(),L.current=(0,p._)((0,m._)({},L.current),{share_recipient:e}),F(L.current),[2,n]}})}),function(e){return w.apply(this,arguments)}),draftMessage:(0,u.jsx)(nv,{gizmoTemplate:J,revertDraft:function(){var e=V.E.getQueryData((0,d.Vw)(L.current.id).queryKey);null!=e&&(L.current=e,F(e),ei())},hasUnpublishedChanges:en,isSavingDraft:Q,upsertDraftError:$,className:"mr-2 text-sm"}),showActionsModal:function(){eE(!0)},className:"flex-shrink-0"}),et&&P&&(0,u.jsx)(k,{gizmoId:P.id}),eh&&ex&&(0,u.jsx)(z,{isFlaggedBrandName:ef,onClose:function(){return eg(!1)}}),(0,u.jsxs)("div",{className:"relative flex w-full grow overflow-hidden",children:[(0,u.jsx)("div",{className:"flex w-full justify-center md:w-1/2",children:(0,u.jsx)("div",{className:"h-full max-w-[800px] grow overflow-hidden px-3",children:eA?(0,u.jsx)(e7,{gizmo:J,updateGizmo:I,onClose:function(){eE(!1)}}):(0,u.jsxs)("div",{className:"flex h-full flex-col pt-4 md:pt-8",children:[(0,u.jsx)(nR,{editorTab:eN,setEditorTab:ek,className:"mb-6 flex-shrink-0 self-center"}),(0,u.jsx)("div",{className:"grow overflow-hidden px-2",children:eN===s.MAGIC_MAKER?(0,u.jsx)("div",{className:"h-full w-full pb-5",children:(0,u.jsx)(nL,{gizmoTemplate:J,updateGizmo:I,completionCallbackResponse:ec,clientThreadId:H,gizmoRef:L,magicMakerConversationGizmoRef:D,magicMakerTemplate:el,requireGizmoId:eo},H)}):eN===s.ADVANCED?(0,u.jsx)(eQ,{gizmoTemplate:J,updateGizmoTemplate:I,generateProfilePic:function(){eG(!0),eu(L,D,["Generate a new profile picture for this GPT using gizmo_editor generate_profile_pic. Do not prompt the user for any clarification. Do not send extra text outside of the tool function call."])},setIsUploadingProfilePic:eI,isGeneratingProfilePic:eS,setIsGeneratingProfilePic:eG,requireGizmoId:eo,onShowActionsEditor:function(){eE(!0)}}):(0,u.jsx)(nC,{gizmoTemplate:J,isSavingDraft:Q,showTitle:!1})})]})})}),(0,u.jsx)("div",{className:(0,q.default)("hidden w-1/2 justify-center border-l border-token-border-medium bg-token-surface-secondary pt-8",eN!==s.PREVIEW&&"md:flex"),children:(0,u.jsx)("div",{className:"max-w-[800px] flex-grow pb-5",children:(0,u.jsx)("div",{className:"h-full",children:(0,u.jsx)(nC,{gizmoTemplate:J,isSavingDraft:Q})})})})]})]})};function nq(e){var n=e.businessWorkspaceId,t=e.gizmoId,i=(0,d.b9)(t,!0).data,r=(0,U.ec)(U.F_.accountUserId),o=(0,U.aF)(),a=null==o?void 0:o.id,l=null!=i&&null!=r&&null!=a&&(0,e8.k1)(i,r,a,n);return(0,R.useEffect)(function(){i&&void 0!==r&&!l&&(0,y.O)(i.id)},[l,r,i]),null!=i&&l?(0,u.jsx)(nV,{businessWorkspaceId:n,gizmo:i}):null}function nO(e){var n=e.businessWorkspaceId,t=e.onNewGizmoId;return(0,u.jsx)(nV,{businessWorkspaceId:n,gizmo:void 0,onNewGizmoId:t})}function nB(e){var n=e.gizmoId,t=e.remixSourceId,i=(0,B.useRouter)(),r=(0,U.$T)(),o=(0,U.ec)(U.F_.businessWorkspaceId),a=(0,R.useRef)(void 0),l=n;return null!=n&&a.current===n&&(l=void 0),(0,L.yx)({resetThreadAction:function(){i.push("/")}}),(0,u.jsx)("div",{children:r?(0,u.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,u.jsx)(G.Z,{})}):(0,u.jsx)("div",{children:void 0!=l?(0,u.jsx)(nq,{businessWorkspaceId:o,gizmoId:l},l):(0,u.jsx)(nO,{businessWorkspaceId:o,remixSourceId:t,onNewGizmoId:function(e){a.current=e,window.history.replaceState(window.history.state,"",(0,Z.AA)(e))}})})})}var nJ=t(23234),nF=t(97218),nW=!0;function nK(){var e=(0,nJ.Jq)();(0,nF.f)(null==e||e);var n=(0,B.useRouter)(),t=n.query.slug,i=t?(0,d.CR)(t):void 0,r=n.query.remixFrom,o=(0,U.$T)(),a=(0,U.hz)(),l=a.has(A.PL),s=(0,nJ.Jq)();return((0,R.useEffect)(function(){l&&nS.ZP.initializeAndGatherData()},[l]),(0,R.useEffect)(function(){o||s||n.push("/")},[o,a,n,s]),s)?(0,u.jsx)(nB,{gizmoId:i,remixSourceId:r}):null}},76768:function(e,n,t){var i=t(35250),r=t(5397),o=t.n(r);t(70079);var a=function(e){var n=e.children;return(0,i.jsx)(i.Fragment,{children:n})};n.Z=o()(function(){return Promise.resolve(a)},{ssr:!1})},39669:function(e,n,t){t.d(n,{W:function(){return r},x:function(){return o}});var i=t(10499),r={id:void 0,name:"",owner_id:"",author_name:void 0,description:null,published_at:void 0,icon:void 0,color:void 0,updated_at:void 0,profile_pic_id:void 0,profile_pic_permalink:void 0,config:{context_message:"",model_slug:i.S0,assistant_welcome_message:void 0,enabled_tools:void 0}},o={name:"",owner_id:"",author_name:void 0,description:null,published_at:void 0,icon:void 0,color:void 0,updated_at:void 0,profile_pic_id:void 0,profile_pic_permalink:void 0,version:0,live_version:0,config:{context_message:"",model_slug:i.Mw,assistant_welcome_message:void 0,enabled_tools:[{tool_id:"dalle"}]}}},74329:function(e,n,t){t.d(n,{O:function(){return l},h:function(){return s}});var i=t(4337),r=t(21389);function o(){var e=(0,i._)(["flex p-3 items-center gap-3 transition-colors duration-200 text-gray-600 dark:text-gray-200 cursor-pointer text-sm rounded-md bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 h-11"]);return o=function(){return e},e}function a(){var e=(0,i._)(["h-11 w-11"]);return a=function(){return e},e}var l=r.Z.button(o()),s=r.Z.div(a())},81547:function(e,n,t){t.d(n,{b:function(){return u}});var i=t(21722),r=t(38104),o=t(35250),a=t(94705),l=t(7184),s=t(21950),c=t(72290);function u(e){var n,t=e.gizmoTemplate,u=e.onSuccess,d=e.onClose,f=(0,s.kb)(),m=(n=(0,i._)(function(){return(0,r.Jh)(this,function(e){switch(e.label){case 0:if((null==t?void 0:t.id)==null)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,f.mutateAsync({gizmoId:t.id})];case 2:return e.sent(),u(),[3,4];case 3:return e.sent(),c.m.danger("Failed to delete gizmo. Please try again."),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,o.jsx)(l.Z,{isOpen:!0,onClose:d,type:"danger",title:"Delete GPT",primaryButton:(0,o.jsx)(a.ZP.Button,{title:"Delete GPT",color:"danger",loading:f.isPending,onClick:function(){m()}}),secondaryButton:(0,o.jsx)(a.ZP.Button,{title:"Cancel",color:"neutral",onClick:d}),children:(0,o.jsx)("div",{className:"text-sm",children:"Are you sure you want to delete this GPT? This cannot be undone."})})}},27382:function(e,n,t){t.d(n,{R:function(){return g},Vq:function(){return v},ZB:function(){return p},ZP:function(){return m},zV:function(){return h}});var i=t(4337),r=t(35250),o=t(7813),a=t(19841),l=t(21389);function s(){var e=(0,i._)(["p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer"]);return s=function(){return e},e}function c(){var e=(0,i._)(["flex px-3 min-h-[44px] py-1 items-center gap-3 dark:text-white cursor-pointer text-sm"]);return c=function(){return e},e}function u(){var e=(0,i._)(["rounded-md border dark:border-white/20 gizmo:min-h-0 hover:bg-gray-500/10 h-11 gizmo:h-10 gizmo:rounded-lg gizmo:border-[rgba(0,0,0,0.1)]"]);return u=function(){return e},e}function d(){var e=(0,i._)(["h-px dark:bg-white/10 bg-black/20"]);return d=function(){return e},e}function f(){var e=(0,i._)(["",""]);return f=function(){return e},e}function m(e){var n=e.onClick,t=e.href,i=e.target,l=e.children;return(0,r.jsx)(o.v.Item,{children:function(e){var o=e.active;return(0,r.jsx)(p,{as:void 0!==t?"a":"button",onClick:n,href:t,target:i,className:(0,a.default)(o?"bg-gray-100 dark:bg-gray-800":"hover:bg-gray-100 dark:hover:bg-gray-800"),children:l})}})}l.Z.a(s());var p=l.Z.a(c()),h=(0,l.Z)(p)(u()),g=l.Z.div(d()),v=(0,l.Z)(p)(f(),function(e){return e.$active?"bg-gray-100 dark:bg-gray-800":"hover:bg-gray-100 dark:hover:bg-gray-800 gizmo:dark:hover:bg-token-surface-primary gizmo:hover:bg-token-surface-primary"})},97218:function(e,n,t){t.d(n,{f:function(){return l}});var i=t(18866),r=t(10721),o=t.n(r),a=t(70079);function l(e){(0,a.useEffect)(function(){e||o().replace((0,i.M5)(i.LT.NO_ACCESS),void 0,{shallow:!0})},[e])}}}]);